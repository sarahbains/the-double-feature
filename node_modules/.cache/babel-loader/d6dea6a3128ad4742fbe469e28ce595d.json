{"ast":null,"code":"// Global App State\nimport globalHook from 'use-global-hook';\nimport { appStorageName } from '../globals/globals';\n\nfunction getFavs() {\n  let favsFromStorage = localStorage.getItem(appStorageName);\n\n  if (favsFromStorage === null) {\n    favsFromStorage = [];\n  } else {\n    favsFromStorage = JSON.parse(favsFromStorage);\n  }\n\n  return favsFromStorage;\n}\n\nconst actions = {\n  addFav: (store, movieObj) => {\n    const newFavs = [...store.state.favs, movieObj];\n    const newFavsForStorage = JSON.stringify(newFavs);\n    localStorage.setItem(appStorageName, newFavsForStorage);\n    store.setState({\n      favs: newFavs\n    });\n  },\n  removeFav: (store, id) => {\n    let currentFavs = store.state.favs;\n    const indexOfMovieToRemove = currentFavs.findIndex(movieObj => movieObj.id === id);\n    currentFavs.splice(indexOfMovieToRemove, 1);\n    let favsForStorage = JSON.stringify(currentFavs);\n    localStorage.setItem(appStorageName, favsForStorage);\n    store.setState({\n      favs: currentFavs\n    });\n  }\n};\nconst initialState = {\n  favs: getFavs()\n};\nconst useGlobal = globalHook(initialState, actions);\nexport default useGlobal;","map":{"version":3,"sources":["/Users/sarahbains/Desktop/FWD28/Web Scripting /webScripting3/the-dbl-feature/src/store/globalAppState.js"],"names":["globalHook","appStorageName","getFavs","favsFromStorage","localStorage","getItem","JSON","parse","actions","addFav","store","movieObj","newFavs","state","favs","newFavsForStorage","stringify","setItem","setState","removeFav","id","currentFavs","indexOfMovieToRemove","findIndex","splice","favsForStorage","initialState","useGlobal"],"mappings":"AAAA;AAEA,OAAOA,UAAP,MAAuB,iBAAvB;AACA,SAASC,cAAT,QAA+B,oBAA/B;;AAEA,SAASC,OAAT,GAAkB;AACd,MAAIC,eAAe,GAAGC,YAAY,CAACC,OAAb,CAAqBJ,cAArB,CAAtB;;AACA,MAAGE,eAAe,KAAK,IAAvB,EAA4B;AACxBA,IAAAA,eAAe,GAAG,EAAlB;AACH,GAFD,MAEK;AACDA,IAAAA,eAAe,GAAGG,IAAI,CAACC,KAAL,CAAWJ,eAAX,CAAlB;AACH;;AACD,SAAOA,eAAP;AACH;;AAED,MAAMK,OAAO,GAAG;AACZC,EAAAA,MAAM,EAAE,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAEzB,UAAMC,OAAO,GAAG,CAAC,GAAGF,KAAK,CAACG,KAAN,CAAYC,IAAhB,EAAsBH,QAAtB,CAAhB;AAEA,UAAMI,iBAAiB,GAAGT,IAAI,CAACU,SAAL,CAAeJ,OAAf,CAA1B;AAEAR,IAAAA,YAAY,CAACa,OAAb,CAAqBhB,cAArB,EAAqCc,iBAArC;AAEAL,IAAAA,KAAK,CAACQ,QAAN,CAAe;AAAEJ,MAAAA,IAAI,EAAEF;AAAR,KAAf;AAEH,GAXW;AAYZO,EAAAA,SAAS,EAAE,CAACT,KAAD,EAAQU,EAAR,KAAe;AAEtB,QAAIC,WAAW,GAAGX,KAAK,CAACG,KAAN,CAAYC,IAA9B;AAEA,UAAMQ,oBAAoB,GAAGD,WAAW,CAACE,SAAZ,CAAuBZ,QAAD,IAAcA,QAAQ,CAACS,EAAT,KAAgBA,EAApD,CAA7B;AACAC,IAAAA,WAAW,CAACG,MAAZ,CAAmBF,oBAAnB,EAAyC,CAAzC;AAEA,QAAIG,cAAc,GAAGnB,IAAI,CAACU,SAAL,CAAeK,WAAf,CAArB;AACAjB,IAAAA,YAAY,CAACa,OAAb,CAAqBhB,cAArB,EAAqCwB,cAArC;AAEAf,IAAAA,KAAK,CAACQ,QAAN,CAAe;AAAEJ,MAAAA,IAAI,EAAEO;AAAR,KAAf;AAEH;AAxBW,CAAhB;AA2BA,MAAMK,YAAY,GAAG;AACjBZ,EAAAA,IAAI,EAAEZ,OAAO;AADI,CAArB;AAIA,MAAMyB,SAAS,GAAG3B,UAAU,CAAC0B,YAAD,EAAelB,OAAf,CAA5B;AAEA,eAAemB,SAAf","sourcesContent":["// Global App State\n\nimport globalHook from 'use-global-hook';\nimport { appStorageName } from '../globals/globals';\n\nfunction getFavs(){\n    let favsFromStorage = localStorage.getItem(appStorageName);\n    if(favsFromStorage === null){\n        favsFromStorage = [];\n    }else{\n        favsFromStorage = JSON.parse(favsFromStorage);\n    }\n    return favsFromStorage;\n}\n\nconst actions = {\n    addFav: (store, movieObj) => {\n\n        const newFavs = [...store.state.favs, movieObj];\n\n        const newFavsForStorage = JSON.stringify(newFavs);\n        \n        localStorage.setItem(appStorageName, newFavsForStorage);\n        \n        store.setState({ favs: newFavs });\n\n    },\n    removeFav: (store, id) => {\n\n        let currentFavs = store.state.favs;\n\n        const indexOfMovieToRemove = currentFavs.findIndex((movieObj) => movieObj.id === id);\n        currentFavs.splice(indexOfMovieToRemove, 1);\n    \n        let favsForStorage = JSON.stringify(currentFavs);\n        localStorage.setItem(appStorageName, favsForStorage);\n        \n        store.setState({ favs: currentFavs });\n\n    }\n}\n\nconst initialState = {\n    favs: getFavs()\n}\n\nconst useGlobal = globalHook(initialState, actions);\n\nexport default useGlobal;"]},"metadata":{},"sourceType":"module"}